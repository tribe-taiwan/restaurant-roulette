<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UIåŠŸèƒ½çµ„ä»¶æ¸¬è©¦ - Task 7</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        .test-button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª UIåŠŸèƒ½çµ„ä»¶æ¸¬è©¦ - ä»»å‹™7</h1>
        <p>æ­¤æ¸¬è©¦é©—è­‰æ‰€æœ‰UIåŠŸèƒ½çµ„ä»¶æ˜¯å¦æ­£å¸¸å·¥ä½œ</p>
        
        <button class="test-button" onclick="runTests()">é–‹å§‹æ¸¬è©¦</button>
        <button class="test-button" onclick="openMainApp()">æ‰“é–‹ä¸»æ‡‰ç”¨</button>
        
        <div id="testResults"></div>
    </div>

    <script>
        function addResult(message, type = 'info') {
            const resultsDiv = document.getElementById('testResults');
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${type}`;
            resultDiv.innerHTML = message;
            resultsDiv.appendChild(resultDiv);
        }

        function openMainApp() {
            window.open('/', '_blank');
        }

        async function runTests() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = '';
            
            addResult('ğŸš€ é–‹å§‹UIåŠŸèƒ½çµ„ä»¶æ¸¬è©¦...', 'info');

            try {
                // æ¸¬è©¦1: æª¢æŸ¥ä¸»æ‡‰ç”¨æ˜¯å¦å¯è¨ªå•
                addResult('âœ… 1. æª¢æŸ¥ä¸»æ‡‰ç”¨è¨ªå•æ€§', 'info');
                
                const response = await fetch('/');
                if (response.ok) {
                    addResult('   ä¸»æ‡‰ç”¨å¯æ­£å¸¸è¨ªå•', 'success');
                } else {
                    addResult('   ä¸»æ‡‰ç”¨è¨ªå•å¤±æ•—', 'error');
                    return;
                }

                // æ¸¬è©¦2: æª¢æŸ¥SlotMachineçµ„ä»¶æ˜¯å¦å­˜åœ¨
                addResult('âœ… 2. æª¢æŸ¥SlotMachineçµ„ä»¶', 'info');
                
                const slotMachineResponse = await fetch('/components/SlotMachine.js');
                if (slotMachineResponse.ok) {
                    const slotMachineCode = await slotMachineResponse.text();
                    
                    // æª¢æŸ¥å€™é¸æ¸…å–®åŠŸèƒ½
                    if (slotMachineCode.includes('candidateList') && slotMachineCode.includes('onRemoveCandidate')) {
                        addResult('   âœ… å€™é¸æ¸…å–®åŠŸèƒ½å·²å¯¦ç¾', 'success');
                    } else {
                        addResult('   âŒ å€™é¸æ¸…å–®åŠŸèƒ½ç¼ºå¤±', 'error');
                    }
                    
                    // æª¢æŸ¥è©•åˆ†é¡¯ç¤º
                    if (slotMachineCode.includes('renderStars') && slotMachineCode.includes('rating')) {
                        addResult('   âœ… é¤å»³è©•åˆ†é¡¯ç¤ºå·²å¯¦ç¾', 'success');
                    } else {
                        addResult('   âŒ é¤å»³è©•åˆ†é¡¯ç¤ºç¼ºå¤±', 'error');
                    }
                    
                    // æª¢æŸ¥åƒ¹ä½æ¨™ç±¤
                    if (slotMachineCode.includes('priceLevel') && slotMachineCode.includes('priceLabels')) {
                        addResult('   âœ… åƒ¹ä½æ¨™ç±¤é¡¯ç¤ºå·²å¯¦ç¾', 'success');
                    } else {
                        addResult('   âŒ åƒ¹ä½æ¨™ç±¤é¡¯ç¤ºç¼ºå¤±', 'error');
                    }
                    
                    // æª¢æŸ¥åˆ†äº«æŒ‰éˆ•
                    if (slotMachineCode.includes('shareButtonLogic') && slotMachineCode.includes('handleShareClick')) {
                        addResult('   âœ… åˆ†äº«æŒ‰éˆ•åŠŸèƒ½å·²å¯¦ç¾', 'success');
                    } else {
                        addResult('   âŒ åˆ†äº«æŒ‰éˆ•åŠŸèƒ½ç¼ºå¤±', 'error');
                    }
                    
                    // æª¢æŸ¥å°èˆªæŒ‰éˆ•
                    if (slotMachineCode.includes('getDirectionsUrl') && slotMachineCode.includes('navigate')) {
                        addResult('   âœ… å°èˆªæŒ‰éˆ•åŠŸèƒ½å·²å¯¦ç¾', 'success');
                    } else {
                        addResult('   âŒ å°èˆªæŒ‰éˆ•åŠŸèƒ½ç¼ºå¤±', 'error');
                    }
                    
                } else {
                    addResult('   âŒ SlotMachineçµ„ä»¶æ–‡ä»¶ç„¡æ³•è¨ªå•', 'error');
                }

                // æ¸¬è©¦3: æª¢æŸ¥æŒ‰éˆ•é‚è¼¯æ–‡ä»¶
                addResult('âœ… 3. æª¢æŸ¥æŒ‰éˆ•é‚è¼¯å¯¦ç¾', 'info');
                
                const buttonLogicResponse = await fetch('/components/SlotMachineButtonLogic.js');
                if (buttonLogicResponse.ok) {
                    const buttonLogicCode = await buttonLogicResponse.text();
                    
                    // æª¢æŸ¥æŒ‰éˆ•åœ–æ¨™å’Œæ–‡å­—å‡½æ•¸
                    if (buttonLogicCode.includes('getAddButtonIcon') && buttonLogicCode.includes('getAddButtonText')) {
                        addResult('   âœ… æŒ‰éˆ•åœ–æ¨™å’Œæ–‡å­—å‡½æ•¸å·²å¯¦ç¾', 'success');
                    } else {
                        addResult('   âŒ æŒ‰éˆ•åœ–æ¨™å’Œæ–‡å­—å‡½æ•¸ç¼ºå¤±', 'error');
                    }
                    
                    // æª¢æŸ¥åˆ†äº«æŒ‰éˆ•é‚è¼¯
                    if (buttonLogicCode.includes('getShareButtonIcon') && buttonLogicCode.includes('getShareButtonText')) {
                        addResult('   âœ… åˆ†äº«æŒ‰éˆ•é‚è¼¯å·²å¯¦ç¾', 'success');
                    } else {
                        addResult('   âŒ åˆ†äº«æŒ‰éˆ•é‚è¼¯ç¼ºå¤±', 'error');
                    }
                    
                    // æª¢æŸ¥æŒ‰éˆ•ç‹€æ…‹ç®¡ç†
                    if (buttonLogicCode.includes('buttonClickState') && buttonLogicCode.includes('isAddButtonDisabled')) {
                        addResult('   âœ… æŒ‰éˆ•ç‹€æ…‹ç®¡ç†å·²å¯¦ç¾', 'success');
                    } else {
                        addResult('   âŒ æŒ‰éˆ•ç‹€æ…‹ç®¡ç†ç¼ºå¤±', 'error');
                    }
                    
                } else {
                    addResult('   âŒ æŒ‰éˆ•é‚è¼¯æ–‡ä»¶ç„¡æ³•è¨ªå•', 'error');
                }

                // æ¸¬è©¦4: æª¢æŸ¥è§¸æ§è™•ç†
                addResult('âœ… 4. æª¢æŸ¥è§¸æ§æ“ä½œæ”¯æŒ', 'info');
                
                const touchHandlerResponse = await fetch('/components/SlotMachineTouchHandler.js');
                if (touchHandlerResponse.ok) {
                    addResult('   âœ… è§¸æ§è™•ç†æ–‡ä»¶å­˜åœ¨', 'success');
                } else {
                    addResult('   âš ï¸ è§¸æ§è™•ç†æ–‡ä»¶å¯èƒ½ç¼ºå¤±ï¼ˆä½†å¯èƒ½åœ¨å…¶ä»–æ–‡ä»¶ä¸­å¯¦ç¾ï¼‰', 'info');
                }

                addResult('ğŸ‰ UIåŠŸèƒ½çµ„ä»¶æ¸¬è©¦å®Œæˆï¼', 'success');
                addResult('ğŸ“ å»ºè­°ï¼šè«‹åœ¨ä¸»æ‡‰ç”¨ä¸­æ‰‹å‹•æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½ä»¥ç¢ºä¿å®Œæ•´æ€§', 'info');
                addResult('ğŸ”— é»æ“Š"æ‰“é–‹ä¸»æ‡‰ç”¨"æŒ‰éˆ•é€²è¡Œæ‰‹å‹•æ¸¬è©¦', 'info');

            } catch (error) {
                addResult(`âŒ æ¸¬è©¦éç¨‹ä¸­ç™¼ç”ŸéŒ¯èª¤: ${error.message}`, 'error');
            }
        }

        // é é¢è¼‰å…¥æ™‚è‡ªå‹•é‹è¡Œæ¸¬è©¦
        window.addEventListener('load', () => {
            setTimeout(runTests, 1000);
        });
    </script>
</body>
</html>