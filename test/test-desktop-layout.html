<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¡Œé¢ç«¯å¸ƒå±€æ¸¬è©¦</title>
    
    <!-- è¼‰å…¥æ¨£å¼ -->
    <link rel="stylesheet" href="../components/shared/garmin-design-system.css">
    <link rel="stylesheet" href="../components/shared/shared-components.css">
    <link rel="stylesheet" href="../components/shared/responsive-performance.css">
    <link rel="stylesheet" href="../components/shared/snap-scroll-layout.css">
    <link rel="stylesheet" href="../components/shared/unified-layout.css">
    <link rel="stylesheet" href="../components/LocationManager/LocationManager.css">
    <link rel="stylesheet" href="../components/SearchSettings/SearchSettings.css">
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            /* ç¢ºä¿æ¡Œé¢ç«¯å¯ä»¥æ­£å¸¸æ»¾å‹• */
            overflow-y: auto !important;
            height: auto !important;
        }
        
        .test-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 1000;
            max-width: 300px;
        }
        
        .test-section {
            margin-bottom: 40px;
        }
        
        .test-title {
            text-align: center;
            font-size: 32px;
            font-weight: bold;
            color: #ff6b35;
            margin: 40px 0;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-pass {
            background: #4caf50;
        }
        
        .status-fail {
            background: #f44336;
        }
        
        .content-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        
        .demo-content {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            backdrop-filter: blur(10px);
            max-width: 600px;
            margin: 20px;
        }
    </style>
</head>
<body>
    <!-- æ¸¬è©¦ä¿¡æ¯é¡¯ç¤º -->
    <div class="test-info" id="testInfo">
        <h4>ğŸ–¥ï¸ æ¡Œé¢ç«¯æ¸¬è©¦</h4>
        <div>è¦–çª—å¯¬åº¦: <span id="windowWidth">--</span>px</div>
        <div>è¨­å‚™é¡å‹: <span id="deviceType">--</span></div>
        <div><span id="scrollStatus" class="status-indicator"></span>æ»¾å‹•åŠŸèƒ½</div>
        <div><span id="snapStatus" class="status-indicator"></span>æ»‘å‹•å°é½Š</div>
        <div><span id="widthStatus" class="status-indicator"></span>çµ±ä¸€å¯¬åº¦</div>
        <div><span id="indicatorStatus" class="status-indicator"></span>æŒ‡ç¤ºå™¨éš±è—</div>
    </div>

    <div class="test-title">ğŸ–¥ï¸ æ¡Œé¢ç«¯å¸ƒå±€æ¸¬è©¦</div>

    <!-- ç¬¬ä¸€å€‹å…§å®¹å€å¡Š -->
    <div class="content-section">
        <div class="demo-content">
            <h2>ç¬¬ä¸€å€‹å€å¡Š</h2>
            <p>é€™æ˜¯ç¬¬ä¸€å€‹å…§å®¹å€å¡Šã€‚åœ¨æ¡Œé¢ç«¯ï¼Œä½ æ‡‰è©²èƒ½å¤ ä½¿ç”¨æ»‘é¼ æ»¾è¼ªæ­£å¸¸æ»¾å‹•åˆ°ä¸‹ä¸€å€‹å€å¡Šã€‚</p>
            <p>æ¸¬è©¦é …ç›®ï¼š</p>
            <ul style="text-align: left;">
                <li>æ»‘é¼ æ»¾è¼ªå¯ä»¥æ­£å¸¸ä¸Šä¸‹æ»¾å‹•</li>
                <li>æ²’æœ‰å¼·åˆ¶çš„æ»‘å‹•å°é½Š</li>
                <li>æ²’æœ‰å¤šé¤˜çš„æ»¾å‹•æ¢</li>
                <li>å…§å®¹å¯¬åº¦çµ±ä¸€ä¸”ç½®ä¸­</li>
            </ul>
        </div>
    </div>

    <!-- èªè¨€é¸æ“‡å™¨æ¸¬è©¦ -->
    <div class="content-section">
        <div class="language-selector-container unified-main-container">
            <div class="demo-content">
                <h2>èªè¨€é¸æ“‡å™¨æ¸¬è©¦</h2>
                <p>é€™å€‹å€å¡Šæ¸¬è©¦èªè¨€é¸æ“‡å™¨æ˜¯å¦æ­£ç¢ºç½®ä¸­</p>
                <div style="display: flex; justify-content: center; gap: 10px; margin-top: 20px;">
                    <button style="background: #ff6b35; color: white; border: none; padding: 10px 20px; border-radius: 8px;">ä¸­æ–‡</button>
                    <button style="background: #f7931e; color: white; border: none; padding: 10px 20px; border-radius: 8px;">English</button>
                    <button style="background: #ffd23f; color: #1a1a2e; border: none; padding: 10px 20px; border-radius: 8px;">æ—¥æœ¬èª</button>
                </div>
            </div>
        </div>
    </div>

    <!-- LocationManager æ¸¬è©¦ -->
    <div class="content-section">
        <div class="location-manager-mobile unified-main-container">
            <div class="demo-content">
                <h2>LocationManager æ¸¬è©¦</h2>
                <p>é€™å€‹å€å¡Šæ¸¬è©¦LocationManagerçš„å¯¬åº¦æ˜¯å¦èˆ‡å…¶ä»–å€å¡Šä¸€è‡´</p>
                <div class="location-manager-container">
                    <div class="location-manager-card">
                        <div class="location-section">
                            <div class="current-location-display">
                                <div class="current-location-content">
                                    <div class="current-location-icon">ğŸ“</div>
                                    <div class="current-location-text">
                                        <div class="current-location-label">ç•¶å‰ä½ç½®</div>
                                        <div class="current-location-address">å°å—å¸‚ä¸­è¥¿å€ä¸­å±±è·¯123è™Ÿ</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SearchSettings æ¸¬è©¦ -->
    <div class="content-section">
        <div class="search-settings-container unified-main-container">
            <div class="demo-content">
                <h2>SearchSettings æ¸¬è©¦</h2>
                <p>é€™å€‹å€å¡Šæ¸¬è©¦SearchSettingsçš„å¯¬åº¦æ˜¯å¦èˆ‡å…¶ä»–å€å¡Šä¸€è‡´</p>
                <div class="garmin-distance-control">
                    <div class="distance-display">
                        <span class="distance-value">1.5</span>
                        <span class="distance-label">å…¬é‡Œç¯„åœ</span>
                    </div>
                    <div class="unit-switcher">
                        <button class="unit-button active">å…¬é‡Œ</button>
                        <button class="unit-button">è‹±é‡Œ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æœ€å¾Œä¸€å€‹å€å¡Š -->
    <div class="content-section">
        <div class="demo-content">
            <h2>æ¸¬è©¦å®Œæˆ</h2>
            <p>å¦‚æœä½ èƒ½é †åˆ©æ»¾å‹•åˆ°é€™è£¡ï¼Œèªªæ˜æ¡Œé¢ç«¯çš„æ»¾å‹•åŠŸèƒ½æ­£å¸¸ï¼</p>
            <button onclick="runTests()" style="background: #4caf50; color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 16px; cursor: pointer;">é‹è¡Œè‡ªå‹•æ¸¬è©¦</button>
        </div>
    </div>

    <!-- è¼‰å…¥è…³æœ¬ -->
    <script src="../utils/performanceMonitor.js"></script>
    <script src="../utils/responsiveLayoutManager.js"></script>
    <script src="../utils/snapScrollManager.js"></script>
    
    <script>
        // æ›´æ–°æ¸¬è©¦ä¿¡æ¯
        function updateTestInfo() {
            const width = window.innerWidth;
            const isDesktop = width >= 1024 && window.matchMedia('(hover: hover)').matches;
            
            document.getElementById('windowWidth').textContent = width;
            document.getElementById('deviceType').textContent = isDesktop ? 'æ¡Œé¢ç«¯' : 'éæ¡Œé¢ç«¯';
            
            // æ¸¬è©¦æ»¾å‹•åŠŸèƒ½
            const canScroll = document.body.style.overflowY !== 'hidden' && 
                             window.getComputedStyle(document.body).overflowY !== 'hidden';
            document.getElementById('scrollStatus').className = 
                `status-indicator ${canScroll ? 'status-pass' : 'status-fail'}`;
            
            // æ¸¬è©¦æ»‘å‹•å°é½Š
            const hasSnapContainer = document.querySelector('.snap-scroll-container') !== null;
            const snapDisabled = !hasSnapContainer || 
                               window.getComputedStyle(document.body).scrollSnapType === 'none';
            document.getElementById('snapStatus').className = 
                `status-indicator ${snapDisabled ? 'status-pass' : 'status-fail'}`;
            
            // æ¸¬è©¦çµ±ä¸€å¯¬åº¦
            const containers = document.querySelectorAll('.unified-main-container');
            let widthConsistent = true;
            if (containers.length > 1) {
                const firstWidth = containers[0].getBoundingClientRect().width;
                widthConsistent = Array.from(containers).every(container => 
                    Math.abs(container.getBoundingClientRect().width - firstWidth) < 2
                );
            }
            document.getElementById('widthStatus').className = 
                `status-indicator ${widthConsistent ? 'status-pass' : 'status-fail'}`;
            
            // æ¸¬è©¦æŒ‡ç¤ºå™¨éš±è—
            const indicator = document.querySelector('.snap-scroll-indicator');
            const indicatorHidden = !indicator || 
                                  window.getComputedStyle(indicator).display === 'none';
            document.getElementById('indicatorStatus').className = 
                `status-indicator ${indicatorHidden ? 'status-pass' : 'status-fail'}`;
        }
        
        // é‹è¡Œè‡ªå‹•æ¸¬è©¦
        function runTests() {
            console.log('ğŸ§ª é–‹å§‹æ¡Œé¢ç«¯è‡ªå‹•æ¸¬è©¦');
            
            const tests = [
                {
                    name: 'æ»¾å‹•åŠŸèƒ½æ¸¬è©¦',
                    test: () => {
                        const initialScrollTop = window.pageYOffset;
                        window.scrollTo(0, 100);
                        const canScroll = window.pageYOffset !== initialScrollTop;
                        window.scrollTo(0, initialScrollTop);
                        return canScroll;
                    }
                },
                {
                    name: 'æ»‘å‹•å°é½Šç¦ç”¨æ¸¬è©¦',
                    test: () => {
                        const hasSnapContainer = document.querySelector('.snap-scroll-container');
                        return !hasSnapContainer || 
                               window.getComputedStyle(document.body).scrollSnapType === 'none';
                    }
                },
                {
                    name: 'çµ±ä¸€å¯¬åº¦æ¸¬è©¦',
                    test: () => {
                        const containers = document.querySelectorAll('.unified-main-container');
                        if (containers.length < 2) return true;
                        
                        const firstWidth = containers[0].getBoundingClientRect().width;
                        return Array.from(containers).every(container => 
                            Math.abs(container.getBoundingClientRect().width - firstWidth) < 2
                        );
                    }
                },
                {
                    name: 'æŒ‡ç¤ºå™¨éš±è—æ¸¬è©¦',
                    test: () => {
                        const indicator = document.querySelector('.snap-scroll-indicator');
                        return !indicator || window.getComputedStyle(indicator).display === 'none';
                    }
                },
                {
                    name: 'è¨­å‚™æª¢æ¸¬æ¸¬è©¦',
                    test: () => {
                        const width = window.innerWidth;
                        const hasHover = window.matchMedia('(hover: hover)').matches;
                        return width >= 1024 && hasHover;
                    }
                }
            ];
            
            const results = tests.map(test => ({
                name: test.name,
                passed: test.test(),
                result: test.test() ? 'âœ… é€šé' : 'âŒ å¤±æ•—'
            }));
            
            console.log('ğŸ“‹ æ¸¬è©¦çµæœ:');
            results.forEach(result => {
                console.log(`  ${result.result} ${result.name}`);
            });
            
            const passedCount = results.filter(r => r.passed).length;
            const totalCount = results.length;
            
            console.log(`\nğŸ“Š ç¸½çµ: ${passedCount}/${totalCount} æ¸¬è©¦é€šé`);
            
            if (passedCount === totalCount) {
                console.log('ğŸ‰ æ‰€æœ‰æ¸¬è©¦é€šéï¼æ¡Œé¢ç«¯å¸ƒå±€æ­£å¸¸å·¥ä½œ');
            } else {
                console.log('âš ï¸ éƒ¨åˆ†æ¸¬è©¦å¤±æ•—ï¼Œéœ€è¦é€²ä¸€æ­¥æª¢æŸ¥');
            }
            
            alert(`æ¸¬è©¦å®Œæˆï¼${passedCount}/${totalCount} æ¸¬è©¦é€šé\nè©³ç´°çµæœè«‹æŸ¥çœ‹æ§åˆ¶å°`);
        }
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateTestInfo();
            
            // ç›£è½è¦–çª—å¤§å°è®ŠåŒ–
            window.addEventListener('resize', function() {
                setTimeout(updateTestInfo, 100);
            });
            
            // ç›£è½æ»¾å‹•äº‹ä»¶
            let scrollTimeout;
            window.addEventListener('scroll', function() {
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(() => {
                    console.log('ğŸ“œ æ»¾å‹•äº‹ä»¶è§¸ç™¼ï¼Œç•¶å‰ä½ç½®:', window.pageYOffset);
                }, 100);
            });
            
            // 3ç§’å¾Œè‡ªå‹•é‹è¡Œæ¸¬è©¦
            setTimeout(() => {
                console.log('â° è‡ªå‹•é‹è¡Œæ¡Œé¢ç«¯æ¸¬è©¦');
                runTests();
            }, 3000);
        });
    </script>
</body>
</html>